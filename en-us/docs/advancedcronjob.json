{
  "filename": "advancedcronjob.md",
  "__html": "<h1 id=\"advancedcronjob\">AdvancedCronJob <a class=\"header-anchor\" href=\"#advancedcronjob\">#</a></h1>\n<p>AdvancedCronJob is an enhanced version of CronJob.\nThe original CronJob creates Job reriodically according to schedule rule, but AdvancedCronJob provides template supported multpile job resources.</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps.kruise.io/v1alpha1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">AdvancedCronJob</span>\n<span class=\"hljs-attr\">spec:</span>\n  <span class=\"hljs-attr\">template:</span>\n\n    <span class=\"hljs-comment\"># Option 1: use jobTemplate, which is equivalent to original CronJob</span>\n    <span class=\"hljs-attr\">jobTemplate:</span>\n      <span class=\"hljs-comment\"># ...</span>\n\n    <span class=\"hljs-comment\"># Option 2: use broadcastJobTemplate, which will create a BroadcastJob object when cron schedule triggers</span>\n    <span class=\"hljs-attr\">broadcastJobTemplate:</span>\n      <span class=\"hljs-comment\"># ...</span>\n\n    <span class=\"hljs-comment\"># Options 3(future): ...</span>\n</code></pre>\n<ul>\n<li>jobTemplate：create Jobs reriodically, which is equivalent to original CronJob</li>\n<li>broadcastJobTemplate：create <a href=\"./broadcastjob.html\">BroadcastJobs</a> reriodically, which support to dispatch Jobs on every node</li>\n</ul>\n<p><img src=\"/img/docs/advancedcronjob.png\" alt=\"AdvancedCronjob\"></p>\n<h2 id=\"example\">Example <a class=\"header-anchor\" href=\"#example\">#</a></h2>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps.kruise.io/v1alpha1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">AdvancedCronJob</span>\n<span class=\"hljs-attr\">metadata:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">acj-test</span>\n<span class=\"hljs-attr\">spec:</span>\n  <span class=\"hljs-attr\">schedule:</span> <span class=\"hljs-string\">\"*/1 * * * *\"</span>\n  <span class=\"hljs-attr\">template:</span>\n    <span class=\"hljs-attr\">broadcastJobTemplate:</span>\n      <span class=\"hljs-attr\">spec:</span>\n        <span class=\"hljs-attr\">template:</span>\n          <span class=\"hljs-attr\">spec:</span>\n            <span class=\"hljs-attr\">containers:</span>\n              <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">pi</span>\n                <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">perl</span>\n                <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">[\"perl\",</span>  <span class=\"hljs-string\">\"-Mbignum=bpi\"</span><span class=\"hljs-string\">,</span> <span class=\"hljs-string\">\"-wle\"</span><span class=\"hljs-string\">,</span> <span class=\"hljs-string\">\"print bpi(2000)\"</span><span class=\"hljs-string\">]</span>\n            <span class=\"hljs-attr\">restartPolicy:</span> <span class=\"hljs-string\">Never</span>\n        <span class=\"hljs-attr\">completionPolicy:</span>\n          <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">Always</span>\n          <span class=\"hljs-attr\">ttlSecondsAfterFinished:</span> <span class=\"hljs-number\">30</span>\n</code></pre>\n<p>The YAML below defines an AdvancedCronJob. It will create a BroadcastJob every minute, which will run a job on every node.</p>\n",
  "link": "/en-us/docs/advancedcronjob.html",
  "meta": {
    "title": "AdvancedCronJob"
  }
}